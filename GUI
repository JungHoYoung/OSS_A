package oss_mine;

import javax.swing.*;
import javax.swing.event.MenuListener;

import java.awt.*;
import java.awt.event.*;
import java.util.*;



// 버튼.setEnabled(false); // 버튼 클릭 불가 나중에 써먹을지도 몰라서 남겨둠


public class mine extends JFrame {
	JPanel jp = new JPanel(); // 패널 1
	JPanel jp2 = new JPanel(); // 패널 2
	JButton reset = new JButton(); // 리셋 버튼 설정
	int level = 1;
	
	Random rnd = new Random(); // 랜덤함수
	int[] mine = new int[100]; // 지뢰판 설정
	
	JButton jb[] = new JButton[100]; // 버튼 10x10 생성

public mine() {
	super("지뢰찾기"); // 타이틀
	JMenuBar mb = new JMenuBar();
	JMenu menu = new JMenu("파일");

	menu.add(new JMenuItem("새로 시작하기")).addActionListener(new ActionListener() { // 메뉴바에서 다시하기 클릭
	    public void actionPerformed(ActionEvent e) {
	    	if(level == 1) {
	    		dispose();
	    		new mine();
	    	}
	    	else if(level == 2) {
	    		
	    	}
	    	else if(level == 3) {
	    		
	    	}
	    }
	});
	menu.addSeparator(); // 줄긋기
	menu.add(new JMenuItem("초급")).addActionListener(new ActionListener() { // 메뉴바 초급메뉴 선택
	    public void actionPerformed(ActionEvent e) {
	    	level = 1;
	    }
	});
	menu.add(new JMenuItem("중급")).addActionListener(new ActionListener() { // 메뉴바 초급메뉴 선택
	    public void actionPerformed(ActionEvent e) {
	    	level = 2;
	    }
	});
	menu.add(new JMenuItem("고급")).addActionListener(new ActionListener() { // 메뉴바 초급메뉴 선택
	    public void actionPerformed(ActionEvent e) {
	    	level = 3;
	    }
	});
	
	menu.addSeparator(); // 메뉴바에 줄긋기
	
	menu.add(new JMenuItem("종료")).addActionListener(new ActionListener() { // 메뉴바 종료메뉴 선택
	    public void actionPerformed(ActionEvent e) {
	    	System.exit(0);
	    	// 우리는 하나의 프레임만 쓰기 때문에 dispose()만 해도 실행프로그램이 백그라운드에 남아 있지 않지만
	    	// 여러개의 프레임이 필요해지는 경우에는 이 명령어를 사용할 것
	    }
	});
	mb.add(menu); // 메뉴바에 메뉴를 add
	
	this.setJMenuBar(mb);
	
	this.setLayout(new BorderLayout());
	add(jp);
	add(jp2, "North");
	jp2.add(reset); // 패널에 리셋 버튼 추가
	
	reset.setText("리셋"); // 리셋 버튼 텍스트 설정
	reset.setPreferredSize(new Dimension(260, 30)); // 리셋버튼 사이즈 조정
	reset.addActionListener(new ActionListener() { // 리셋버튼 눌렀을때
	    public void actionPerformed(ActionEvent e) {
	    	JOptionPane.showMessageDialog(null, "'리셋'되었습니다.");
	    }
	});

	for(int count=0; count < 10; ) {
		int setMine = rnd.nextInt(100); // 0과 1 랜덤값 생성
		if(mine[setMine] != 1) { // 해당 배열위치가 1이 아닐경우 (중복 방지)
			mine[setMine] = 1; // 해당 배열값을 1로 설정
			count++; // 지뢰 배치후 카운트값 1증가
		}
	}
	
	for(int i = 0; i < 100; i++) { // 버튼배열 생성
		if(mine[i] == 0) { // mine배열 i위치가 0일경우
			jb[i] = new JButton();
			jb[i].setPreferredSize(new Dimension(20,20));
			jb[i].addActionListener(new ButtonListener()); // 버튼 리스너 생성
    	
			jp.add(jb[i]);
		}
		else if(mine[i] != 0) { // mine배열 i위치가 0이 아닐경우
			jb[i] = new JButton();
			jb[i].setPreferredSize(new Dimension(20,20));
			jb[i].addActionListener(new MineListener()); // 마인 리스너 생성
			jb[i].setText("1"); /////////////////////////////////////// 구분하기 위해 설정함. 마지막에 지울것
			jp.add(jb[i]);
			
		}
	}
	setVisible(true); // 프레임 보이기
	setSize(280, 360); // 프레임 사이즈 설정
	setResizable(false); // 창 사이즈 변경 불가
	this.setLocationRelativeTo(null); // 화면 중앙에 띄우기
	setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // X 누르면 닫기
}

private class ButtonListener implements ActionListener  { 
	public void actionPerformed(ActionEvent e) {
		
	}
}

private class MineListener implements ActionListener  { 
	public void actionPerformed(ActionEvent e) {
		JOptionPane.showMessageDialog(null, "아쉽습니다. 지뢰를 클릭했습니다.");
	}
}

public static void main(String[] args) {
	// TODO Auto-generated method stub
	new mine(); // 프레임 불러오기
	}
}
// 11.26
// 버튼 사이즈 조절, 지뢰 범위 설정, 난이도별 

// 11.26
// 버튼 사이즈 조절, 지뢰 범위 설정, 난이도별 

// 11.26
// 버튼 사이즈 조절, 지뢰 범위 설정, 난이도별 
// 모든 난이도에 리셋버튼 추가 / 아직 작동은 안됨
// 지뢰판 클릭했을때 사용할 액션 리스너 베이스 깔아두고 주석처리 함

// 11.26
// 지뢰 클릭시 패널 닫고 다시 호출 기능 추가
/* 이제 지뢰가 아닌 부분을 클릭했을때 버튼을 블럭 시키면서 숫자를 표시해주는 기능 추가
   깃발 세우는 기능만 추가 하면 일단락 할듯 */ 

// 11.26
// 게임 중 난이도 변경을 위해 메뉴바 생성 [작동은 안됨]

// 11.27
// 메뉴바 기능 및 난이도 선택 기능 추가중

// 11.27
// 전면 수정
// 지뢰인 버튼과 일반 버튼의 리스너를 별도 설정
// 메뉴바에 있는 아이템 리스너 설정 및 일반 버튼 클릭시 이벤트만 설정하면 마무리될듯
